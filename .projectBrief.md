# WDTP API Project Brief

## Overview
What Do They Pay? (WDTP) is a GasBuddy-like platform for wage transparency at brick-and-mortar locations. Users can anonymously submit and search hourly wage data for specific locations.

## Tech Stack
- **Framework**: Laravel 12 with Sail
- **Database**: External PostgreSQL 17 + PostGIS 3.5
- **Authentication**: Laravel Sanctum (token-based)
- **Spatial**: clickbar/laravel-magellan for PostGIS integration
- **Gamification**: cjmellor/laravel-level-up
- **Testing**: PHPUnit (not Pest)
- **API**: /api/v1 prefix, JSON responses

## Database Connection
```env
DB_CONNECTION=pgsql
DB_HOST=10.192.50.3
DB_PORT=5432
DB_DATABASE=wdtpdb
DB_USERNAME=wdtpdb_user
DB_PASSWORD=kZ6-9uwz6H4XZCL8JkiP%

## Core Features

* Industries: Hierarchical categorization (Food Service, Retail, etc.)
* Organizations: Businesses with one or multiple locations
* Locations: Physical addresses with PostGIS coordinates
* Wage Reports: Anonymous hourly (not salary) wage submissions with moderation
* Spatial Search: Find wages near lat/lon with radius
* Gamification: Points, levels, achievements for user engagement
* Moderation: Admin/moderator approval workflow

## API Endpoints

* Authentication: /api/v1/auth/*
* Industries: /api/v1/industries
* Organizations: /api/v1/organizations (with search)
* Locations: /api/v1/locations (with spatial queries)
* Wage Reports: /api/v1/wage-reports (with voting/flagging)
* Moderation: /api/v1/wage-reports/{id}/approve|reject
* Health: /api/v1/healthz

## Constraints

* Use geography(Point,4326) with GiST indexes
* External PostgreSQL (no local database services)
* PHPUnit for all testing
* Conventional commits
* Rate limiting on submissions
* Idempotent operations
